<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate TV Female Hindi News Anchor TTS</title>
<style>
body{font-family:Arial,sans-serif;background:#e6ffe6;margin:0;padding:0;}
.container{max-width:720px;margin:30px auto;background:#fff;padding:25px;border-radius:15px;box-shadow:0 12px 28px rgba(0,0,0,0.25);}
h2{text-align:center;color:green;margin-bottom:20px;}
textarea{width:100%;height:180px;padding:12px;border-radius:12px;border:1px solid #ccc;resize:none;font-size:16px;margin-bottom:12px;}
select, input[type=range]{width:100%;margin-top:12px;padding:8px;border-radius:12px;font-size:16px;}
button{margin-top:15px;padding:12px;font-size:16px;background:green;color:white;border:none;border-radius:12px;cursor:pointer;width:100%;}
button:hover{background:darkgreen;}
#progressBarContainer{margin-top:15px;width:100%;background:#ddd;border-radius:12px;display:none;}
#progressBar{width:0%;height:22px;background:green;border-radius:12px;transition:width 0.2s;}
#countdown{margin-top:10px;font-weight:bold;color:darkgreen;display:none;text-align:center;}
.audioPreview{margin-top:15px;display:none;width:100%;}
.footer{margin-top:25px;font-size:0.9em;color:#555;text-align:center;}
</style>
</head>
<body>
<div class="container">
<h2>üéôÔ∏è Ultimate TV Female Hindi News Anchor TTS</h2>
<form id="ttsForm" method="POST" action="/convert">
<textarea name="text" placeholder="‡§Ö‡§™‡§®‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea><br>

<select name="voice">
<option value="hi_female_normal">‡§π‡§ø‡§Ç‡§¶‡•Ä - Female (Normal)</option>
<option value="hi_female_slow">‡§π‡§ø‡§Ç‡§¶‡•Ä - Female (Slow/Deep)</option>
</select>

<label>Speed: <span id="speedVal">1</span>x</label>
<input type="range" min="0.5" max="2" step="0.1" value="1" id="speedSlider">

<label>Volume: <span id="volumeVal">1</span>x</label>
<input type="range" min="0" max="2" step="0.1" value="1" id="volumeSlider">

<label>Pitch: <span id="pitchVal">1</span>x</label>
<input type="range" min="0.5" max="2" step="0.05" value="1" id="pitchSlider">

<button type="submit">MP3 ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç</button>
<button type="button" id="previewBtn">üéß Live Preview</button>
</form>

<div id="progressBarContainer">
<div id="progressBar"></div>
</div>
<div id="countdown">‚è≥ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...</div>

<audio controls class="audioPreview" id="audioPreview"></audio>

<div class="footer">¬© 2025 Zeeshan Azmi | Ultimate Female Hindi News Anchor</div>
</div>

<script>
const form=document.getElementById("ttsForm");
const progressContainer=document.getElementById("progressBarContainer");
const progressBar=document.getElementById("progressBar");
const countdown=document.getElementById("countdown");
const previewBtn=document.getElementById("previewBtn");
const audioPreview=document.getElementById("audioPreview");
const speedSlider=document.getElementById("speedSlider");
const volumeSlider=document.getElementById("volumeSlider");
const pitchSlider=document.getElementById("pitchSlider");
const speedVal=document.getElementById("speedVal");
const volumeVal=document.getElementById("volumeVal");
const pitchVal=document.getElementById("pitchVal");

speedSlider.addEventListener("input",()=>{speedVal.innerText=speedSlider.value; audioPreview.playbackRate=speedSlider.value;});
volumeSlider.addEventListener("input",()=>{volumeVal.innerText=volumeSlider.value; audioPreview.volume=volumeSlider.value;});
pitchSlider.addEventListener("input",()=>{pitchVal.innerText=pitchSlider.value; audioPreview.playbackRate=pitchSlider.value;});

form.addEventListener("submit",function(e){
progressContainer.style.display="block";countdown.style.display="block";progressBar.style.width="0%";
let width=0;let timeLeft=5;
countdown.innerText=`‚è≥ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç... ${timeLeft}s`;
let interval=setInterval(()=>{if(width>=100)clearInterval(interval);else width+=2;progressBar.style.width=width+"%";},50);
let countdownInterval=setInterval(()=>{if(timeLeft<=0)clearInterval(countdownInterval);else countdown.innerText=`‚è≥ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç... ${timeLeft}s`;timeLeft--;},1000);
});

previewBtn.addEventListener("click",async function(){
const text=form.text.value.trim();
if(!text){alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§°‡§æ‡§≤‡•á‡§Ç‡•§");return;}
const voice=form.voice.value;
const speed=speedSlider.value;
const pitch=pitchSlider.value;
const volume=volumeSlider.value;

progressContainer.style.display="block";countdown.style.display="block";progressBar.style.width="0%";audioPreview.style.display="none";
let width=0;let timeLeft=3;
countdown.innerText=`‚è≥ Generating preview... ${timeLeft}s`;
let interval=setInterval(()=>{if(width>=100)clearInterval(interval);else width+=3;progressBar.style.width=width+"%";},50);
let countdownInterval=setInterval(()=>{if(timeLeft<=0)clearInterval(countdownInterval);else countdown.innerText=`‚è≥ Generating preview... ${timeLeft}s`;timeLeft--;},1000);

try{
const formData=new FormData();formData.append("text",text);formData.append("voice",voice);
const resp=await fetch("/preview",{method:"POST",body:formData});
if(!resp.ok)throw new Error("Preview generation failed");
const blob=await resp.blob();
audioPreview.src=URL.createObjectURL(blob);
audioPreview.playbackRate=pitch; // pitch slider effect
audioPreview.volume=volume; // volume slider
audioPreview.style.display="block";
}catch(err){alert("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: "+err.message);}
finally{progressContainer.style.display="none";countdown.style.display="none";}
});
</script>
</body>
</html>
